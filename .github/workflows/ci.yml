name: CI

on:
  push:
    branches:
      - master
    # paths-ignore:
    #   - '**/README.md'
    #   - '**/CHANGELOG.md'
    #   - 'resources/CLOJURE_LSP_VERSION'
    #   - 'docs/**'
    #   - 'images/**'
    #   - 'mkdocs.yml'
    #   - '.github/workflows/bump_deps.yml'
    #   - '.github/workflows/bump_homebrew.yml'
  pull_request:
    # paths-ignore:
    #   - '**/README.md'
    #   - '**/CHANGELOG.md'
    #   - 'resources/CLOJURE_LSP_VERSION'
    #   - 'docs/**'
    #   - 'images/**'
    #   - 'mkdocs.yml'
    #   - '.github/workflows/bump_deps.yml'
    #   - '.github/workflows/bump_homebrew.yml'

jobs:
  release-clojars:
    name: Release artifact to Clojars
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2

      - uses: jlesquembre/clojars-publish-action@0.3
        env:
          USE_GIT_REF: false
          CLOJARS_USERNAME: ${{ secrets.CLOJARS_USERNAME }}
          CLOJARS_PASSWORD: ${{ secrets.CLOJARS_PASSWORD }}
